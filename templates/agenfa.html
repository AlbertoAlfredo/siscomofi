{% extends "_lancamentos_caixa_banco.html" %}


{% block forms %}

    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a href={{ url_for('caixa_bp.get_lancamentos', id=movimento.id) }}>
            <button
                    aria-controls="nav-movimento"
                    aria-selected="false"
                    class="nav-link"
                    type="button"
            >
                Movimento
            </button>
            </a>
            <a href={{ url_for('caixa_bp.get_lancamentos_agenfa', id=movimento.id) }}>
            <button
                    aria-controls="nav-agenfa"

                    class="nav-link active"
                    type="button"
            >
                AGENFA
            </button>
            </a>
            <a href={{ url_for('caixa_bp.get_lancamentos_iagro', id=movimento.id) }}>
            <button
                    aria-controls="nav-iagro"
                    aria-selected="false"
                    class="nav-link"
                    type="button"
            >
                IAGRO
            </button>
            </a>
            <a href={{ url_for('caixa_bp.get_lancamentos_pagamentos', id=movimento.id) }}>
            <button
                    aria-controls="nav-pagamentos"
                    aria-selected="false"
                    class="nav-link"
                    type="button"
            >
                Pagamentos
            </button>
            </a>
            <a href={{ url_for('caixa_bp.get_lancamentos_outros', id=movimento.id) }}>
            <button
                    aria-controls="nav-outros"
                    aria-selected="false"
                    class="nav-link"
                    type="button"
            >
                Outros Serviços
            </button>
            </a>
        </div>
    </nav>
    <form action={{ "/caixabanco/agenfa?id="+movimento.id|string }} method="POST">
        <div class="tab-content" id="nav-tabContent">
            <div
                    aria-labelledby="nav-agenfa-tab"
                    class="tab-pane fade active show"
                    id="nav-agenfa"
                    role="tabpanel"
                    tabindex="0"
            >
                <div class="row">
                    <div class="col">
                        {{ form.input_field(name="data_pagamento",
                            type='date', label='Data de pagamento', placeholder='', required="required", class='') }}
                    </div>
                    <div class="col">
                        {{ form.input_field(name="n_cheque",
                            type='number', label='N° do Cheque', placeholder='', class='') }}
                    </div>
                    <div class="col">
                        {{ form.input_field(name="valor_pagamento",
                            type='money', label='Valor Pgto', placeholder='', class='') }}

                    </div>

                    <div class="row">
                    <div class="col">
                        {{ form.input_field(name="descricao_pagamento",
                            type='text', label='Descrição do pgto', placeholder='',
                            class='') }}
                    </div>
                        </div>
                </div>
                <div class="col">
                    <button class="btn btn-success" type="submit">
                        Adicionar
                    </button>
                </div>
                <hr/>
                <div class="row">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th scope="col">Data Pgto</th>
                            <th scope="col">N° Cheque</th>
                            <th scope="col">Descrição</th>
                            <th scope="col">Valor</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for valor in agenfa %}

                        <tr scope="row">
                            <td>{{ valor.data_pagamento.strftime('%d/%m/%Y') }}</td>
                            <td>{{ valor.n_cheque }}</td>
                            <td>{{ valor.descricao_pagamento }}</td>
                            <td>{{ "{:.2f}".format(valor.valor_pagamento | float) }}</td>
                            <td><a href="{{ url_for('caixa_bp.get_lancamentos_agenfa', id=movimento.id, apagar=valor.id) }}"><button class="btn btn-danger" type="button">Apagar</button></a></td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </form>

    <hr/>


{% endblock %}